# K마트 영수증 스캐너 - 페이지 레이아웃

## 전체 구조

```
┌─────────────────────────────────────┐
│           app-header                │  ← 상단 헤더 (페이지 제목)
│  [⛶]        페이지 제목                │     전체화면 토글 버튼
├─────────────────────────────────────┤
│                                     │
│                                     │
│           app-main                  │  ← 메인 콘텐츠 영역
│         (페이지별 내용)                │     max-width: 1200px
│                                     │
│                                     │
├─────────────────────────────────────┤
│  📷 스캔  │  📊 대시보드  │  🧾 영수증   │  ← 하단 네비게이션
│         bottom-nav                  │     height: 56px (고정)
└─────────────────────────────────────┘
```

---

## 1. 스캔 페이지 (`/`)

**파일**: `frontend/src/pages/ScanPage.jsx`

영수증을 카메라로 촬영하고 OCR 분석 후 저장하는 페이지.

### 상태별 레이아웃

#### 1-1. 카메라 뷰 (초기 상태)
```
┌─────────────────────────────────────┐
│         camera-container            │
│  ┌───────────────────────────────┐  │
│  │                               │  │
│  │        video-wrapper          │  │
│  │      (카메라 프리뷰)             │  │
│  │                               │  │
│  │  ┌─────────────────────────┐  │  │
│  │  │    receipt-guide        │  │  │  ← 영수증 가이드 오버레이
│  │  │  "영수증을 가이드 안에       │  │  │
│  │  │     맞춰주세요"            │  │  │
│  │  └─────────────────────────┘  │  │
│  └───────────────────────────────┘  │
│                                     │
│  ┌─────────────────────────────────┐│
│  │       camera-controls           ││
│  │  [전면/후면] [  촬영  ] [종료]       ││
│  └─────────────────────────────────┘│
└─────────────────────────────────────┘
```

#### 1-2. 이미지 미리보기 (촬영 후)
```
┌─────────────────────────────────────┐
│        preview-container            │
│                                     │
│         "촬영된 이미지"                │
│  ┌───────────────────────────────┐  │
│  │                               │  │
│  │      preview-image-wrapper    │  │
│  │        (촬영된 사진)             │  │
│  │                               │  │
│  └───────────────────────────────┘  │
│                                     │
│  ┌─────────────────────────────────┐│
│  │       preview-controls          ││
│  │    [다시 촬영]  [이미지 분석]        ││
│  └─────────────────────────────────┘│
└─────────────────────────────────────┘
```

#### 1-3. 결과 테이블 (분석 완료 후)
```
┌─────────────────────────────────────┐
│        result-container             │
│                                     │
│  "인식 결과"                          │
│  "항목을 터치하면 수정할 수 있습니다"       │
│                                     │
│  ┌─────────────────────────────────┐│
│  │     result-table-wrapper        ││
│  │ ┌─────────────────────────────┐ ││
│  │ │ NO │ 상품명 │ 단가 │ 수량 │ 금액 ││
│  │ ├────┼────────┼──────┼─────┼────┤││
│  │ │ 1  │ 상품A  │ 1000 │  2  │2000│││
│  │ │ 2  │ 상품B  │ 500  │  1  │ 500│││
│  │ ├────┴────────┴──────┴─────┼────┤││
│  │ │           합계           │2500│││
│  │ └─────────────────────────────┘ ││
│  └─────────────────────────────────┘│
│                                     │
│  ┌─────────────────────────────────┐│
│  │         receipt-info            ││
│  │  상호명: K마트 OO점                ││
│  │  카드명: 삼성카드                  ││
│  │  구매일시: 25-02-15 14:30         ││
│  └─────────────────────────────────┘│
│                                     │
│  ▶ 원본 텍스트 보기 (접기/펼치기)     │
│                                     │
│  ┌─────────────────────────────────┐│
│  │       result-controls           ││
│  │       [저장]  [새 영수증 스캔]    ││
│  └─────────────────────────────────┘│
└─────────────────────────────────────┘
```

### 컴포넌트 구성
- `Camera.jsx` - 카메라 뷰 (전면/후면 전환, 촬영)
- `ImagePreview.jsx` - 이미지 미리보기 (다시 촬영, 분석)
- `ResultTable.jsx` - 결과 테이블 (인라인 수정, 저장)

---

## 2. 대시보드 페이지 (`/dashboard`)

**파일**: `frontend/src/pages/Dashboard.jsx`

저장된 영수증 데이터를 기반으로 통계 및 분석 정보를 표시하는 페이지.

### 레이아웃
```
┌─────────────────────────────────────┐
│            dashboard                │
│                                     │
│  ┌─────────────────────────────────┐│
│  │      date-range-section         ││
│  │  ┌──────────┐   ┌──────────┐   ││
│  │  │ 시작일    │ ~ │ 종료일    │   ││
│  │  └──────────┘   └──────────┘   ││
│  │  [이번 달] [지난 달] [3개월] [올해]││
│  └─────────────────────────────────┘│
│                                     │
│  ┌─────────────────────────────────┐│
│  │        summary-cards            ││
│  │ ┌─────────┬─────────┬─────────┐ ││
│  │ │ 총 지출  │ 영수증 수│ 평균 금액│ ││
│  │ │₩350,000 │  12건   │ ₩29,166 │ ││
│  │ └─────────┴─────────┴─────────┘ ││
│  └─────────────────────────────────┘│
│                                     │
│  ┌─────────────────────────────────┐│
│  │       chart-section             ││
│  │  "월별 지출"                     ││
│  │  ┌───────────────────────────┐  ││
│  │  │    ████                   │  ││
│  │  │    ████  ████             │  ││
│  │  │    ████  ████  ████       │  ││
│  │  │    ──────────────────     │  ││
│  │  │    1월   2월   3월        │  ││
│  │  └───────────────────────────┘  ││
│  └─────────────────────────────────┘│
│                                     │
│  ┌─────────────────────────────────┐│
│  │       chart-section             ││
│  │  "상점별 지출"                   ││
│  │  ┌───────────────────────────┐  ││
│  │  │ store-list                │  ││
│  │  │ ┌─────────────────────────┐│  ││
│  │  │ │[1] K마트 본점  ₩150,000▶││  ││  ← 클릭 시 카드별 상세
│  │  │ │    3회 방문   42.8%     ││  ││
│  │  │ ├─────────────────────────┤│  ││
│  │  │ │   ▼ 카드별 결제 내역    ││  ││  ← 펼쳐진 상태
│  │  │ │   삼성카드 2회 ₩100,000 ││  ││
│  │  │ │   현대카드 1회  ₩50,000 ││  ││
│  │  │ └─────────────────────────┘│  ││
│  │  │ ┌─────────────────────────┐│  ││
│  │  │ │[2] 이마트    ₩120,000 ▶││  ││
│  │  │ │    2회 방문   34.2%     ││  ││
│  │  │ └─────────────────────────┘│  ││
│  │  └───────────────────────────┘  ││
│  └─────────────────────────────────┘│
│                                     │
│  ┌─────────────────────────────────┐│
│  │       chart-section             ││
│  │  "자주 구매하는 상품"             ││
│  │  ┌───────────────────────────┐  ││
│  │  │ 순위│ 상품명 │횟수│총액│주기 │  ││
│  │  │  1 │ 우유   │ 5회│5000│ 7일 │  ││
│  │  │  2 │ 식빵   │ 3회│6000│14일 │  ││
│  │  └───────────────────────────┘  ││
│  └─────────────────────────────────┘│
└─────────────────────────────────────┘
```

### 섹션 구성
| 섹션 | 클래스명 | 설명 |
|------|----------|------|
| 날짜 선택 | `date-range-section` | DatePicker + 빠른 기간 버튼 |
| 요약 카드 | `summary-cards` | 총 지출, 영수증 수, 평균 금액 |
| 월별 차트 | `chart-section` | Recharts BarChart |
| 상점별 지출 | `chart-section` > `store-list` | 클릭 시 카드별 상세 표시 |
| 자주 구매 | `chart-section` > `frequent-items` | 테이블 형식 |

---

## 3. 영수증 목록 페이지 (`/receipts`)

**파일**: `frontend/src/pages/ReceiptList.jsx`

저장된 영수증 목록을 조회하고 상세 정보를 확인하는 페이지.

### 레이아웃
```
┌─────────────────────────────────────┐
│        receipt-list-page            │
│                                     │
│  ┌─────────────────────────────────┐│
│  │      date-range-section         ││
│  │  ┌──────────┐   ┌──────────┐   ││
│  │  │ 시작일    │ ~ │ 종료일    │   ││
│  │  └──────────┘   └──────────┘   ││
│  │  [이번 달] [지난 달] [3개월] [올해]││
│  └─────────────────────────────────┘│
│                                     │
│  ┌─────────────────────────────────┐│
│  │    receipt-search-section       ││
│  │  ┌───────────────────────────┐  ││
│  │  │ 🔍 상품명 검색...          │  ││
│  │  └───────────────────────────┘  ││
│  └─────────────────────────────────┘│
│                                     │
│  ┌─────────────────────────────────┐│
│  │     receipt-filters-row         ││
│  │  [모든 상점 ▼] [모든 카드 ▼] [초기화]││
│  └─────────────────────────────────┘│
│                                     │
│  ┌─────────────────────────────────┐│
│  │       receipts-section          ││
│  │  "영수증 확인"                   ││
│  │  ┌───────────────────────────┐  ││
│  │  │ receipts-container        │  ││
│  │  │ ┌─────────────────────────┐│  ││
│  │  │ │ receipt-card            ││  ││
│  │  │ │┌───┐                    ││  ││
│  │  │ ││ 15│ K마트 본점  ₩35,000▶││  ││
│  │  │ ││02월│ 14:30 삼성카드    ││  ││
│  │  │ │└───┘                    ││  ││
│  │  │ └─────────────────────────┘│  ││
│  │  │ ┌─────────────────────────┐│  ││
│  │  │ │┌───┐                    ││  ││
│  │  │ ││ 14│ 이마트    ₩28,500 ▶││  ││
│  │  │ ││02월│ 10:15 현대카드    ││  ││
│  │  │ │└───┘                    ││  ││
│  │  │ └─────────────────────────┘│  ││
│  │  └───────────────────────────┘  ││
│  └─────────────────────────────────┘│
└─────────────────────────────────────┘
```

### 영수증 카드 상세 구조
```
┌─────────────────────────────────────┐
│ receipt-card                        │
│ ┌──────┐ ┌────────────────────┐ ┌─┐ │
│ │ date │ │ receipt-item-info  │ │▶│ │
│ │ badge│ │  상점명             │ │ │ │
│ │  15  │ │  시간 카드명        │ │ │ │
│ │ 02월 │ ├────────────────────┤ │ │ │
│ │      │ │ receipt-item-stats │ │ │ │
│ └──────┘ │  ₩35,000           │ └─┘ │
│          └────────────────────┘     │
└─────────────────────────────────────┘
```

### 상세 모달
```
┌─────────────────────────────────────┐
│         modal-overlay               │
│  ┌───────────────────────────────┐  │
│  │       modal-content           │  │
│  │  ┌─────────────────────────┐  │  │
│  │  │ modal-header         [×]│  │  │
│  │  │ K마트 본점                │  │  │
│  │  │ 구매일시: 2025.02.15      │  │  │
│  │  │ 결제수단: 삼성카드          │  │  │
│  │  └─────────────────────────┘  │  │
│  │  ┌─────────────────────────┐  │  │
│  │  │ modal-items             │  │  │
│  │  │ NO│상품명│단가│수량│금액     │  │  │
│  │  │  1│ 우유 │1200│  2│2400  │  │  │
│  │  │  2│ 식빵 │2500│  1│2500  │  │  │
│  │  └─────────────────────────┘  │  │
│  │  ┌─────────────────────────┐  │  │
│  │  │ modal-total             │  │  │
│  │  │ 총 결제금액   ₩35,000      │  │  │
│  │  └─────────────────────────┘  │  │
│  │  ┌─────────────────────────┐  │  │
│  │  │ modal-actions  [삭제]    │  │  │
│  │  └─────────────────────────┘  │  │
│  └───────────────────────────────┘  │
└─────────────────────────────────────┘
```

---

## 공통 컴포넌트

### Navigation (하단 네비게이션)
**파일**: `frontend/src/components/common/Navigation.jsx`

```
┌─────────────────────────────────────┐
│            bottom-nav               │
│  ┌──────────┬──────────┬──────────┐ │
│  │ nav-item │ nav-item │ nav-item │ │
│  │   📷     │   📊     │   🧾     │ │
│  │  스캔     │ 대시보드   │  영수증    │ │
│  │ (active) │          │          │ │
│  └──────────┴──────────┴──────────┘ │
└─────────────────────────────────────┘
```

- 고정 위치 (`position: fixed; bottom: 0`)
- 높이: `56px` (`--nav-height`)
- 활성 탭: `--color-primary` 색상 적용

---

## CSS 변수 (디자인 시스템)

**파일**: `frontend/src/App.css`

### 색상
| 변수명 | 라이트 모드 | 다크 모드 | 용도 |
|--------|-------------|-----------|------|
| `--color-bg` | `#f5f5f5` | `#1a1a1a` | 페이지 배경 |
| `--color-bg-secondary` | `#ffffff` | `#2a2a2a` | 카드/섹션 배경 |
| `--color-bg-tertiary` | `#e0e0e0` | `#3a3a3a` | 테두리, 구분선 |
| `--color-text` | `#333333` | `#e0e0e0` | 기본 텍스트 |
| `--color-text-muted` | `#888888` | `#888888` | 보조 텍스트 |
| `--color-primary` | `#4a90d9` | `#4a90d9` | 강조색 (파란색) |
| `--color-danger` | `#e74c3c` | `#e74c3c` | 위험/삭제 (빨간색) |

### 간격
| 변수명 | 값 | 용도 |
|--------|-----|------|
| `--spacing-xs` | `4px` | 최소 간격 |
| `--spacing-sm` | `8px` | 작은 간격 |
| `--spacing-md` | `16px` | 기본 간격 |
| `--spacing-lg` | `24px` | 큰 간격 |

### 폰트 크기
| 변수명 | 값 | 용도 |
|--------|-----|------|
| `--font-size-xs` | `10px` | 배지, 라벨 |
| `--font-size-sm` | `13px` | 보조 텍스트 |
| `--font-size-md` | `16px` | 기본 텍스트 |
| `--font-size-lg` | `18px` | 제목, 강조 |

### 기타
| 변수명 | 값 | 용도 |
|--------|-----|------|
| `--border-radius` | `8px` | 모서리 둥글기 |
| `--nav-height` | `56px` | 하단 네비게이션 높이 |
| `--page-max-width` | `1200px` | 페이지 최대 너비 |

---

## 반응형 디자인

### 모바일 (< 480px)
- 요약 카드: 1열 레이아웃 (가로 정렬)
- 차트 영역: 세로 스택

### 태블릿/데스크톱 (≥ 768px)
- 상단 패딩 증가 (`padding-top: 80px`)
- 요약 카드: 3열 그리드

---

## 파일 구조

```
frontend/src/
├── App.jsx                 # 앱 진입점, 라우팅
├── App.css                 # 글로벌 스타일, CSS 변수
├── main.jsx                # React 렌더링
│
├── pages/
│   ├── ScanPage.jsx        # 스캔 페이지
│   ├── Dashboard.jsx       # 대시보드 페이지
│   ├── Dashboard.css       # 대시보드 스타일
│   ├── ReceiptList.jsx     # 영수증 목록 페이지
│   └── ReceiptList.css     # 영수증 목록 스타일
│
├── components/
│   ├── Camera.jsx          # 카메라 컴포넌트
│   ├── ImagePreview.jsx    # 이미지 미리보기
│   ├── ResultTable.jsx     # 결과 테이블
│   └── common/
│       ├── Navigation.jsx  # 하단 네비게이션
│       └── Navigation.css
│
└── services/
    └── api.js              # API 통신 함수
```
